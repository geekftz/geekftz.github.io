<!doctype html><html lang=en-us><head><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=manifest href=/images/site.webmanifest><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A simple, minimal blog for those who love text."><title>深入理解TypeScript——文档篇之函数 | hackftz</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=https://hackftz.github.io/css/theme-override.css><header><nav><ul><li class=pull-left><a href=https://hackftz.github.io/>~/hackftz</a></li><li class=pull-left><a href=/categories/>~/categories</a></li><li class=pull-left><a href=/tags/>~/tags</a></li><li class=pull-right><a href=https://github.com/hackftz>~/github</a></li></ul></nav></header></head><body><br><div class=article-meta><h1><span class=title>深入理解TypeScript——文档篇之函数</span></h1><h2 class=author>hackftz</h2><h2 class=date>2020/10/12</h2><p class=terms>Categories: <a href=/categories/typescript>TypeScript</a>
Tags: <a href=/tags/2020-10>2020-10</a> <a href=/tags/note>note</a></p></div><div class=content-wrapper><main><h4 id=一函数类型>一、函数类型</h4><ol><li><p>定义函数类型</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#75715e>// 函数式声明
</span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span>;
}
   
<span style=color:#75715e>// 由变量指向的匿名函数
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myAdd</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span>; };
</code></pre></div></li><li><p>完整函数类型</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myAdd</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=</span>
    <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span>; };
</code></pre></div><p>通常需要将类型抽离成接口，形成规范。</p></li><li><p>推断类型</p><p>函数定义赋值语句一边有类型。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#75715e>// myAdd has the full function type
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myAdd</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span>; };
   
<span style=color:#75715e>// The parameters `x` and `y` have the type number
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myAdd</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>baseValue</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>increment</span>: <span style=color:#66d9ef>number</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=</span>
    <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span>; };
</code></pre></div></li></ol><h4 id=二可选参数默认参数>二、可选参数、默认参数</h4><p>​ ts中传递给一个函数的参数个数必须与函数期望的参数个数一致。</p><ol><li><p>可选参数</p><p>在TypeScript里我们可以在参数名旁使用 <code>?</code>实现可选参数的功能。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#a6e22e>firstName</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>lastName?</span>: <span style=color:#66d9ef>string</span>) {
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>lastName</span>)
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>firstName</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>lastName</span>;
    <span style=color:#66d9ef>else</span>
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>firstName</span>;
}
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>);  <span style=color:#75715e>// works correctly now
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>, <span style=color:#e6db74>&#34;Adams&#34;</span>, <span style=color:#e6db74>&#34;Sr.&#34;</span>);  <span style=color:#75715e>// error, too many parameters
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>, <span style=color:#e6db74>&#34;Adams&#34;</span>);  <span style=color:#75715e>// ah, just right
</span></code></pre></div><p>注意：可选参数必须跟在必须参数后面。</p></li><li><p>默认参数</p><p>在TypeScript里，我们也可以为参数提供一个默认值当用户没有传递这个参数或传递的值是<code>undefined</code>时。 它们叫做有默认初始化值的参数。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#a6e22e>firstName</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>lastName</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Smith&#34;</span>) {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>firstName</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>lastName</span>;
}
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>);                  <span style=color:#75715e>// works correctly now, returns &#34;Bob Smith&#34;
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>, <span style=color:#66d9ef>undefined</span>);       <span style=color:#75715e>// still works, also returns &#34;Bob Smith&#34;
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>, <span style=color:#e6db74>&#34;Adams&#34;</span>, <span style=color:#e6db74>&#34;Sr.&#34;</span>);  <span style=color:#75715e>// error, too many parameters
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>, <span style=color:#e6db74>&#34;Adams&#34;</span>);         <span style=color:#75715e>// ah, just right
</span></code></pre></div><p>在所有必须参数后面的带默认初始化的参数都是可选的，与可选参数一样，在调用函数的时候可以省略。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#a6e22e>firstName</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>lastName?</span>: <span style=color:#66d9ef>string</span>) {
    <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>}
   
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#a6e22e>firstName</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>lastName</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Smith&#34;</span>) { <span style=color:#75715e>// lastName为可选，调用时可省略
</span><span style=color:#75715e></span>    <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>}
</code></pre></div><p>与普通可选参数不同的是，带默认值的参数不需要放在必须参数的后面。 如果带默认值的参数出现在必须参数前面，用户必须明确的传入 <code>undefined</code>值来获得默认值。 例如，我们重写最后一个例子，让 <code>firstName</code>是带默认值的参数：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#a6e22e>firstName</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Will&#34;</span>, <span style=color:#a6e22e>lastName</span>: <span style=color:#66d9ef>string</span>) {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>firstName</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>lastName</span>;
}
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>);                  <span style=color:#75715e>// error, too few parameters
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>, <span style=color:#e6db74>&#34;Adams&#34;</span>, <span style=color:#e6db74>&#34;Sr.&#34;</span>);  <span style=color:#75715e>// error, too many parameters
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Bob&#34;</span>, <span style=color:#e6db74>&#34;Adams&#34;</span>);         <span style=color:#75715e>// okay and returns &#34;Bob Adams&#34;
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#66d9ef>undefined</span>, <span style=color:#e6db74>&#34;Adams&#34;</span>);     <span style=color:#75715e>// okay and returns &#34;Will Adams&#34; 首个参数后有其他参数，则要取得默认值必须要传入undefined
</span></code></pre></div></li><li><p>剩余参数</p><p>剩余参数会被当做个数不限的可选参数。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#a6e22e>firstName</span>: <span style=color:#66d9ef>string</span>, ...<span style=color:#a6e22e>restOfName</span>: <span style=color:#66d9ef>string</span>[]) {
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>firstName</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>restOfName</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#34; &#34;</span>);
}
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>employeeName</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>buildName</span>(<span style=color:#e6db74>&#34;Joseph&#34;</span>, <span style=color:#e6db74>&#34;Samuel&#34;</span>, <span style=color:#e6db74>&#34;Lucas&#34;</span>, <span style=color:#e6db74>&#34;MacKinzie&#34;</span>);
</code></pre></div></li><li><p>this</p><p>JavaScript里，<code>this</code>的值在函数被调用的时候才会指定。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>deck</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>suits</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;hearts&#34;</span>, <span style=color:#e6db74>&#34;spades&#34;</span>, <span style=color:#e6db74>&#34;clubs&#34;</span>, <span style=color:#e6db74>&#34;diamonds&#34;</span>],
    <span style=color:#a6e22e>cards</span>: <span style=color:#66d9ef>Array</span>(<span style=color:#ae81ff>52</span>),
    <span style=color:#a6e22e>createCardPicker</span>: <span style=color:#66d9ef>function</span>() {
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>function</span>() {
            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedCard</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>52</span>);
            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedSuit</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>pickedCard</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>13</span>);
   
            <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>suit</span>: <span style=color:#66d9ef>this.suits</span>[<span style=color:#a6e22e>pickedSuit</span>], <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>pickedCard</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>13</span>};
        }
    }
}
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cardPicker</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>deck</span>.<span style=color:#a6e22e>createCardPicker</span>();
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedCard</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cardPicker</span>();
   
<span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;card: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard</span>.<span style=color:#a6e22e>card</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; of &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard</span>.<span style=color:#a6e22e>suit</span>); <span style=color:#75715e>// error 找不到this
</span></code></pre></div><p>箭头函数能保存函数创建时的 <code>this</code>值，而不是调用时的值。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>deck</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>suits</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;hearts&#34;</span>, <span style=color:#e6db74>&#34;spades&#34;</span>, <span style=color:#e6db74>&#34;clubs&#34;</span>, <span style=color:#e6db74>&#34;diamonds&#34;</span>],
    <span style=color:#a6e22e>cards</span>: <span style=color:#66d9ef>Array</span>(<span style=color:#ae81ff>52</span>),
    <span style=color:#a6e22e>createCardPicker</span>: <span style=color:#66d9ef>function</span>() {
        <span style=color:#75715e>// NOTE: the line below is now an arrow function, allowing us to capture &#39;this&#39; right here
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> () <span style=color:#f92672>=&gt;</span> {
            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedCard</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>52</span>);
            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedSuit</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>pickedCard</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>13</span>);
   
            <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>suit</span>: <span style=color:#66d9ef>this.suits</span>[<span style=color:#a6e22e>pickedSuit</span>], <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>pickedCard</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>13</span>};
        }
    }
}
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cardPicker</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>deck</span>.<span style=color:#a6e22e>createCardPicker</span>();
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedCard</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cardPicker</span>();
   
<span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;card: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard</span>.<span style=color:#a6e22e>card</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; of &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard</span>.<span style=color:#a6e22e>suit</span>);
</code></pre></div></li><li><p>重载</p><p>方法是为同一个函数提供多个函数类型定义来进行函数重载。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>suits</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;hearts&#34;</span>, <span style=color:#e6db74>&#34;spades&#34;</span>, <span style=color:#e6db74>&#34;clubs&#34;</span>, <span style=color:#e6db74>&#34;diamonds&#34;</span>];
   
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pickCard</span>(<span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>suit</span>: <span style=color:#66d9ef>string</span>; <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>number</span>; }[])<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span>;
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pickCard</span>(<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> {<span style=color:#a6e22e>suit</span>: <span style=color:#66d9ef>string</span>; <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>number</span>; };
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pickCard</span>(<span style=color:#a6e22e>x</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>any</span> {
    <span style=color:#75715e>// Check to see if we&#39;re working with an object/array
</span><span style=color:#75715e></span>    <span style=color:#75715e>// if so, they gave us the deck and we&#39;ll pick the card
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;object&#34;</span>) {
        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedCard</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#a6e22e>x</span>.<span style=color:#a6e22e>length</span>);
        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pickedCard</span>;
    }
    <span style=color:#75715e>// Otherwise just let them pick the card
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;number&#34;</span>) {
        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedSuit</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>x</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>13</span>);
        <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>suit</span>: <span style=color:#66d9ef>suits</span>[<span style=color:#a6e22e>pickedSuit</span>], <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>x</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>13</span> };
    }
}
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myDeck</span> <span style=color:#f92672>=</span> [{ <span style=color:#a6e22e>suit</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;diamonds&#34;</span>, <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>2</span> }, { <span style=color:#a6e22e>suit</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;spades&#34;</span>, <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>10</span> }, { <span style=color:#a6e22e>suit</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;hearts&#34;</span>, <span style=color:#a6e22e>card</span>: <span style=color:#66d9ef>4</span> }];
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedCard1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>myDeck</span>[<span style=color:#a6e22e>pickCard</span>(<span style=color:#a6e22e>myDeck</span>)];
<span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;card: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard1</span>.<span style=color:#a6e22e>card</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; of &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard1</span>.<span style=color:#a6e22e>suit</span>);
   
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pickedCard2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pickCard</span>(<span style=color:#ae81ff>15</span>);
<span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;card: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard2</span>.<span style=color:#a6e22e>card</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; of &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pickedCard2</span>.<span style=color:#a6e22e>suit</span>);
</code></pre></div><p>为了让编译器能够选择正确的检查类型，它与JavaScript里的处理流程相似。 它查找重载列表，尝试使用第一个重载定义。 如果匹配的话就使用这个。 因此，在定义重载的时候，一定要把最精确的定义放在最前面。(大几率事件)</p></li></ol><a href=/>>> Home</a></main></div><footer><script>(function(){function center_el(tagName){var tags=document.getElementsByTagName(tagName),i,tag;for(i=0;i<tags.length;i++){tag=tags[i];var parent=tag.parentElement;if(parent.childNodes.length===1){if(parent.nodeName==='A'){parent=parent.parentElement;if(parent.childNodes.length!=1)continue;}
if(parent.nodeName==='P')parent.style.textAlign='center';}}}
var tagNames=['img','embed','object'];for(var i=0;i<tagNames.length;i++){center_el(tagNames[i]);}})();</script><hr>公众号: KeepinJS | <a href=mailto:472849306@qq.com>Email</a></footer></body></html>